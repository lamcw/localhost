{% extends "core/base.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/header.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/footer.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/review.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/public_profile.css" %}">
{% endblock %}

{% block body_wrapped %}
{% include "core/include/header.html" %}
<div class="container-fluid">
  <h1 class="tag-line">{{ user.full_name }}</h1>
  <form id="id" class="m-0" method="get" action="{% url 'messaging:messages' %}">
    <input type="hidden" id="recipient" name="recipient" value="{{ user.id }}">
    <button class="btn btn-secondary" type="submit">Message</button>
  </form>
  <div class="container-fluid">
    <div class="flex-row">
      <div class="card flex-md-row mb-4 h-md-250">
        <div class="card-body d-flex flex-column align-items-start">
          <h4>Description</h4>
          <p>
            {% if user.bio %}
            {{ user.bio }}
            {% else %}
            N/A
            {% endif %}
          </p>
        </div>
      </div>
    </div>
    <div class="card flex-md-row mb-4 h-md-250 text-left">
      <div class="card-body d-flex flex-column align-items-start">
        <h4>Listings</h4>
        <div class="px-0 w-100">
          <ul class="list-group w-100">
            {% for property in user.property_set.all %}
            <li class="list-group-item">
              <div class="w-100 row m-0">
                <div class="col-md-4 m-0">
                  <a href="{{ property.get_absolute_url }}" class="align-middle">{{ property.title }}</a>
                </div>
                <div class="col-md-8">
                  {{ property.address }}
                </div>
              </div>
            </li>
            {% endfor %}
          </ul>  
        </div>
      </div>
    </div>
    <div class="flex-row">
      <div class="card flex-md-row mb-4 h-md-250 text-left">
        <div class="card-body d-flex flex-column align-items-start">
          <div class="w-100">
            <h4 class="d-inline">Reviews</h4>
            <div class="d-inline float-right">
              <div class="d-inline">
                  <i class="fas fa-star checked"></i>
                  <i class="fas fa-star checked"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  <i class="fas fa-star"></i>
                  ({{ user.received_reviews.count }})
                </div>
            </div>
          </div>
          {% for review in user.received_reviews.all %}
          <div class="review">
            <p class="m-0">
              {{ review.description }}
            </p>
            <div class="d-inline float-right m-1">
              {{ review.reviewer }}
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>
{% include "core/include/footer.html" %}
{% endblock %}
