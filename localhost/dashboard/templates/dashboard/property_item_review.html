{% extends "core/base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/header.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/footer.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/components/panel.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "core/css/leave_review.css" %}">
{% endblock %}

{% block title %} {{ block.super }} - Review {% endblock %}

{% block body_wrapped %}
{% include "core/include/header.html" %}

<div class="container panel p-0">
  <form method="post" class="m-0">
    <img class="w-100" src="{{ property_item.images.all.0.img.url }}">
    <div class="p-4">
      <h4 class="mt-3">{{ property_item.title }}</h4>
      <strong class="text-success">{{ property_item.property.address }}</strong>
      <h5 class="mt-3">Star Rating</h5>
      <div>
        <span class="fa fa-star" id="star-0" onclick="rating(1)"></span>
        <span class="fa fa-star" id="star-1" onclick="rating(2)"></span>
        <span class="fa fa-star" id="star-2" onclick="rating(3)"></span>
        <span class="fa fa-star" id="star-3" onclick="rating(4)"></span>
        <span class="fa fa-star" id="star-4" onclick="rating(5)"></span>
      </div>
      <input id="rating" type="hidden" value="0">
      {% csrf_token %}
      {% for field in form %}
      {% include "core/include/form_field.html" with form=form field=field %}
      {% endfor %}
      <input type="submit" value="Submit" class="m-0 btn btn-success">
    </div>
  </form>
</div>

{% include "core/include/footer.html" %}
{% endblock %}
{% block js %}
<script>
  $('.fa-star').hover(
    function() {
      $(this).prevAll().addBack().css('color', 'orange');
    }, function() {
      $(this).prevAll().addBack().css('color', 'black');
    }
  );

  function rating(stars) {
    /*Add stars*/
    for (var i = 0; i < stars; i++) {
      $('#star-' + i).addClass('checked');
    }
    /*Remove extra stars*/
    for (var i = stars; i < 5; i++) {
      $('#star-' + i).removeClass('checked');
    }

    $('#rating').val(stars);
    console.log($('#rating').val());
  }
</script>
{% endblock %}